# Release Notes - v0.1.0-3

Release date: 2026-02-18

This release adds a built-in Redis state-store adapter and related test/documentation improvements.

## Compatibility

- `kong >= 3.4, < 4.0`
- Verified baseline: `Kong 3.8.0`

## Highlights

- Added built-in Redis adapter module:
  - `kong.plugins.version-gate.state_store_redis`
  - Hash-based storage (`version`, `ts_ms`) with TTL support.
  - Fail-open behavior on Redis errors/unavailable host.
  - Config/env resolution with precedence: `plugin config > env var > built-in default`.
- Extended plugin schema with Redis configuration fields:
  - `state_store_redis_host`, `state_store_redis_port`, `state_store_redis_password`
  - `state_store_redis_database`, `state_store_redis_timeout_ms`
  - `state_store_redis_keepalive_ms`, `state_store_redis_pool_size`, `state_store_redis_prefix`
- Updated `state_store.lua` adapter contract to pass plugin `conf` into adapter `get_last_seen`/`set_last_seen`.
- Added tests:
  - Unit tests for Redis adapter behavior and fail-open semantics.
  - Unit test verifying plugin config is passed to adapter methods.
  - Redis integration spec for end-to-end adapter lifecycle behavior.
- Updated test runtime config:
  - `.busted` profiles for unit/integration separation.
  - `.pongo/pongorc` now includes `--redis`.
- Expanded `README.md` with Redis adapter configuration, env vars, and updated test commands.

## Packaging

- Added `kong-plugin-version-gate-0.1.0-3.rockspec`.
- Version/tag alignment for this release:
  - LuaRocks package version: `0.1.0-3`
  - GitHub source tag: `v0.1.0-3`

## Changed Files (working tree basis)

- Modified:
  - `.busted`
  - `.pongo/pongorc`
  - `README.md`
  - `kong/plugins/version-gate/schema.lua`
  - `kong/plugins/version-gate/state_store.lua`
  - `spec/state_store_spec.lua`
- Added:
  - `kong-plugin-version-gate-0.1.0-3.rockspec`
  - `kong/plugins/version-gate/state_store_redis.lua`
  - `spec/state_store_redis_spec.lua`
  - `spec/version-gate/11-integration-redis_spec.lua`
